<!--
tplColorStyles:
--nruicolor-name-bg-100 = background/fill color for 'name' element @ 100% opacity
--nruicolor-name-fg-100 = foreground/text color for 'name' element @ 100% opacity
-->
<?!= tplColorStyles ?>
<style id="heights"></style>
<style>
/* ----------------------------------------
Font
-------------------------------------- */

@import url('https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,300;1,700&family=Unna:ital,wght@0,400;0,700;1,400;1,700');

/* ----------------------------------------
Variables

Note: colours generated by gccUi are prefixed with color-
See:
- style#colors

- [x] audit colours
- [x] refactor to style by area of UI
- [ ] flatten colors - remove semi-opaque overlays
- [ ] rename NRUiColors to areas of UI
- [ ] use fg/bg combination in NRUiColors as per NRDateFlags/NRNonVolumes
-------------------------------------- */

:root {
  --rgb-black: 0, 0, 0;
  --rgb-white: 255, 255, 255;

  --brand-border: rgba(var(--nruicolor-header-bg-rgb), .25);
  --brand-collections-border: rgba(28, 32, 24, .5);

  --bg-light: rgba(251, 252, 250, 1);
  --bg-midlight: rgba(var(--rgb-white), .8);

  --border-shadow: rgba(var(--rgb-black), .15);

  --checkbox-border: rgba(var(--rgb-black), 1);
  --checkbox-icon: rgba(var(--rgb-black), 1);

  --gutter: .75rem;
  --gutter-half: calc(var(--gutter) / 2);
  --gutter-quarter: calc(var(--gutter) / 4);
  --gutter-sixth: calc(var(--gutter) / 6);

  --image-logo: url('<?= tplCompanyLogo ?>');

  --input-checkbox-width: 1.5rem;
  --input-checkbox-small-width: .9rem;

  --text-dark: rgba(28, 32, 24, 1);
  --text-light: rgba(var(--rgb-white), 1);
  --text-midlight: rgba(var(--rgb-white), .8);
  --text-tertiary: rgba(var(--rgb-black), .8);
  --text-underline-border: var(--nruicolor-collections-bg-100);

  /* above .count */
  --z-index-submit: 2;
  /* above .submit */
  --z-index-overlay: 3;
  /* above .overlay */
  --z-index-header-footer: 4;

  /* UI areas (A-Z) */

  --body-bg: rgba(40, 40, 40, 1);
  --body-text: var(--text-dark);

  --collection-bg: rgba(var(--nruicolor-collections-bg-rgb), .05);
  --collection-border: var(--brand-border);
  --collection-border-left: rgba(var(--nruicolor-header-bg-rgb), .5);
  --collection-input-border: var(--brand-collections-border);
  --collection-button-bg-disabled: rgba(var(--nruicolor-collections-bg-rgb), .05);
  --collection-button-bg-incomplete: rgba(var(--nruicolor-active-bg-rgb), .2);
  --collection-button-bg-complete: rgba(var(--nruicolor-header-bg-rgb), .2);

  --container-count-text: var(--text-light);

  /* help -> dialog */

  --dialog-dark-bg: rgba(var(--nruicolor-dialog-dark-bg-rgb), .95);
  --dialog-dark-text: rgba(var(--nruicolor-dialog-dark-fg-rgb), .8); /* was --text-midlight */

  --dialog-dark-button-bg: var(--nruicolor-dialog-dark-button-bg-100);
  --dialog-dark-button-text: var(--nruicolor-dialog-dark-button-fg-100);
  --dialog-dark-console-bg: rgba(var(--rgb-white), .1);
  --dialog-dark-header-border: rgba(var(--rgb-white), .3);

  --dialog-light-bg: var(--nruicolor-dialog-light-bg-100);
  --dialog-light-text: var(--nruicolor-dialog-light-fg-100);

  --dialog-light-button-bg: var(--nruicolor-dialog-light-button-bg-100);
  --dialog-light-button-text: var(--nruicolor-dialog-light-button-fg-100);

  --dialog-button-text-shadow: rgba(var(--rgb-white), .4);

  --font-serif-brand: Unna, serif;
  --font-sans-serif: Arial, sans-serif;
  --font-sans-serif-brand: 'Source Sans Pro', sans-serif;

  --footer-bg: rgba(215, 215, 215, 1);
  --footer-text: var(--text-tertiary);
  --footer-border: var(--brand-border);
  --footer-link-text: var(--text-tertiary);

  --grid-legend-border: var(--nruicolor-collections-bg-100);
  --grid-key-border: rgba(var(--nruicolor-collections-bg-rgb), .2);

  --header-bg: var(--nruicolor-header-bg-100);
  --header-bg-overlay-top: rgba(var(--rgb-white), .7);
  --header-bg-overlay-bottom: rgba(var(--rgb-white), .4);
  --header-padding-top: 1.2rem;
  --header-padding-bottom: .35rem;
  --header-border: rgba(var(--rgb-white), .3);

  --input-bg: var(--text-light);
  --input-large-bg: var(--bg-midlight);
  --input-border: var(--nruicolor-collections-bg-100);
  --input-outline: var(--nruicolor-active-bg-100);

  --loader-text: var(--text-midlight);
  --loader-select-text: rgba(var(--rgb-black), 1);

  --notes-text: var(--text-tertiary);
  --notes-border: var(--brand-collections-border);
  --notes-input-bg: rgba(var(--rgb-white), .5);
  --notes-input-bg-active: rgba(var(--rgb-white), 1);
  --notes-input-border-active: rgba(var(--rgb-black), 1);

  --run-bg: var(--bg-light);

  /* duplicates?
  --run-header-bg: rgba(50, 50, 50, 1);
  --run-header-text: var(--bg-light);
  */

  --run-header-bg: var(--nruicolor-header-bg-100);
  --run-header-text: var(--text-light);
  --run-header-label-bg: var(--nruicolor-collections-bg-100);
  --run-header-item-bg: rgba(var(--rgb-black), .25);
  --run-header-item-border: var(--brand-collections-border);

  --submit-bg: var(--nruicolor-collections-bg-100);
  --submit-border: var(--nruicolor-collections-bg-100);
  --submit-text: var(--text-light);

  --submit-status-bg: rgba(50, 50, 50, 1);
  --submit-status-border: rgba(50, 50, 50, 1);
  --submit-status-text: var(--bg-light);

  --submit-status-bg-saving: rgba(var(--nruicolor-active-bg-rgb), 1);
  --submit-status-text-saving: rgba(var(--rgb-black), 1);
}

/* ----------------------------------------
Resets
-------------------------------------- */

*,
*::before,
*::after {
  box-sizing: border-box;
}

abbr {
  text-decoration: none;
}

a {
  color: inherit;
  text-decoration: none;
}

.a {
  display: inline-block;
}

.a::after {
  content: '';
  display: block;
  opacity: .2;
  border-bottom: 1px solid var(--text-underline-border);
  margin-top: -.05em;
}

button {
  background-color: transparent;
  padding: 0;
  border: 0;
}

button * {
  /* prevent child from interfering with button click event */
  pointer-events: none;
}

/* ----------------------------------------
Helpers
-------------------------------------- */

.wrapper {
  padding: 0 var(--gutter);
}

.hidden,
[hidden] {
  display: none;
}

.hidden-assistive {
  /* stylelint-disable-next-line declaration-no-important */
  position: absolute !important;
  width: 1px;
  height: 1px;
  clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap;
  overflow: hidden;
}

/* ----------------------------------------
Grids
-------------------------------------- */

.grid:not([hidden]) {
  display: grid;
}

.grid-inline:not([hidden]) {
  display: inline-grid;
}

/* grid-1-1 */

.grid-1-1 {
  grid-template-columns: 1fr 1fr;
  grid-gap: var(--gutter);
  align-items: center;
}

/* grid-2-1 */

.grid-2-1 {
  grid-template-columns: 1fr 1fr;
  grid-gap: var(--gutter-half);
  align-items: center;
}

/* grid-checkbox */

.grid-checkbox {
  grid-template-rows: auto auto;
  grid-gap: var(--gutter-quarter);
  text-align: center;
}

.grid-checkbox input {
  margin: 0;
}

/* grid-checkbox-inline */

.grid-checkbox-inline {
  grid-template-columns: auto auto;
  grid-column-gap: var(--gutter-half);
  align-items: center;
  padding: var(--gutter-half) 0; /* rather than grid-row-gap, to make label click area larger */
}

.grid-checkbox-inline input,
.grid-checkbox-inline .label {
  margin: 0;
}

/* grid-dialog-button-inline */

.grid-dialog-button-inline {
  grid-template-columns: auto auto;
  align-items: center;
}

/* grid-footer */

.grid-footer {
  grid-template-columns: 1fr 2.3rem;
  grid-gap: var(--gutter);
  align-items: center;
}

/* grid-key (help dialog) */

.grid-key {
  grid-template-areas: 'left divider right';
  grid-template-columns: 1.6rem 1px auto;
  grid-gap: var(--gutter);
}

.grid-key::after {
  content: '';
  grid-area: divider;
  border-right: 1px solid var(--grid-key-border);
}

.grid-key > *:first-child {
  grid-area: left;
}

.grid-key > *:last-child {
  grid-area: right;
  align-self: center;
}

/* grid-legend - collection title */

.grid-legend {
  grid-template-areas: 'left divider right';
  grid-template-columns: auto 1px 4.2rem;
  grid-gap: var(--gutter);
}

.grid-legend::after {
  content: '';
  grid-area: divider;
  border-right: 1px dotted var(--grid-legend-border);
}

.grid-legend > *:first-child {
  grid-area: left;
}

.grid-legend > *:last-child {
  grid-area: right;
}

/* grid-label */

.grid-label {
  grid-template-columns: 1fr 1fr;
  grid-gap: var(--gutter-half);
  align-items: center;
}

/* grid-checklist */

.grid-checklist {
  grid-template-columns: 1fr var(--input-checkbox-width);
  grid-gap: var(--gutter);
  align-items: end;
}

.grid-checklist.grid-no-gutter {
  grid-gap: 0;
}

/* grid-label-run */

.grid-label-run {
  grid-template-areas: 'left right';
  grid-template-columns: 1fr 1fr;
  grid-template-rows: auto auto;
  grid-gap: var(--gutter-half);
  align-items: center;
  justify-items: center;
}

.grid-label-run > :nth-child(1) {
  grid-area: left;
}

.grid-label-run > :nth-child(2) {
  grid-area: right;
}

/* grid-run-header */

.grid-run-header {
  grid-template-columns: auto 2.6rem 2.6rem 3.14rem;
  align-items: stretch;
}

.grid-run-header > * {
  padding: var(--gutter-half);
}

.grid-run-header > *:first-child {
  padding-left: calc(var(--gutter) + var(--gutter-half));
}

.grid-run-header > *:last-child {
  padding-right: calc(var(--gutter-half) + var(--gutter));
}

.grid-run-header-item {
  grid-template-columns: 1fr auto;
  grid-gap: var(--gutter-half);
  align-items: start;
}

/* grid-select */

.grid-select {
  /* stack select and arrow  */
  grid-template-areas: 'select';
  align-items: center;
}

/* grid-select-form */

.grid-select-form {
  grid-template-areas:
    'topleft topmiddle topright'
    'bottom bottom bottom';
  grid-template-columns: 1fr 1fr 2rem;
  grid-template-rows: auto auto;
  grid-column-gap: var(--gutter-half);
  align-items: end;
}

.grid-select-form .input:nth-child(1) {
  grid-area: topleft;
}

.grid-select-form .input:nth-child(2) {
  grid-area: topmiddle;
}

.grid-select-form .submit {
  grid-area: topright;
}

.grid-select-form .input:nth-child(3) {
  grid-area: bottom;
  padding-right: calc(var(--gutter-half) + 2rem);
}

/* grid-submit */

.grid-submit {
  grid-template-areas:
    'submit'
    'description';
  align-items: center;
}

.grid-submit > .loader-icon,
.grid-submit > .loader-title {
  grid-area: submit;
}

.grid-submit > .loader-description {
  grid-area: description;
}

/* grid-container-count */

.grid-container-count {
  grid-template-areas: 'containercount';
  align-items: center;
}

.grid-container-count > * {
  grid-area: containercount;
}

/* grid-overlay */

.grid-overlay {
  grid-template-columns: 1fr;
  grid-template-rows: .55fr auto .45fr;
  place-items: center;
  grid-gap: var(--gutter);
  width: 100vw;
  height: 100vh;
}

.grid-overlay > *:nth-child(1) {
  align-self: end;
}

.grid-overlay > *:nth-child(3) {
  align-self: start;
}

/* grid-dialog-header */

.grid-dialog-header {
  grid-template-columns: auto 2.8125rem;
  grid-gap: calc(var(--gutter) * 2);
  align-items: center;
}

/* ----------------------------------------
body
-------------------------------------- */

body {
  min-height: 100vh;
  background-color: var(--body-bg);
  color: var(--body-text);
  font-family: var(--font-serif-brand);
  /* allow for elements with fixed position */
  padding: var(--height-fixed-header) 0 var(--height-fixed-footer);
  margin: 0;

  /* Disable pull-to-refresh and overscroll glow effect, retain swipe navigation */
  /* See: https://developer.chrome.com/blog/overscroll-behavior/ */
  overscroll-behavior-y: none;
}

.bg-logo {
  background-image: var(--image-logo);
  background-repeat: no-repeat;
  background-position: 50% calc(50% + 2rem);

  /* vmin (Edge 16+) is the lesser of vw and vh */
  /* vmax (Edge 16+) is the greater of vw and vh */
  background-size: 80vmin auto;
}

/* ----------------------------------------
.label
-------------------------------------- */

.label {
  font-weight: 700;
  margin: 0 .5rem .2rem 0;
}

.label.small {
  font-weight: 700;
  text-transform: none;
}

.label-run {
  width: 4.4rem;
  font-weight: 400;
  margin: 0;
}

/* ----------------------------------------
#header (pinned)
-------------------------------------- */

header {
  position: fixed;
  top: 0;
  z-index: var(--z-index-header-footer);
  width: 100%;

  background:
    linear-gradient(var(--header-bg-overlay-top), var(--header-bg-overlay-bottom)),
    var(--nruicolor-header-bg-100);
  padding-top: var(--header-padding-top);
  padding-bottom: var(--header-padding-bottom);
  /* h1 */
  margin: 0;
}

header::after {
  content: '';
  display: block;
  position: absolute;
  right: 0;
  bottom: 0;
  left: 0;
  border-bottom: .25rem solid var(--header-border);
}

h1 {
  margin: 0;
}

/* ----------------------------------------
#header #run-select .select
See: https://moderncss.dev/custom-select-styles-with-pure-css/
-------------------------------------- */

.select {
  /* AP for focus border */
  position: relative;
  width: 100%;
  /* else background is transparent which can affect display in high contrast mode */
  background-color: var(--input-bg);
  font-size: .7rem;
  line-height: 1.1;
  /* space for arrow */
  padding: .35em .5em .2em;
  border: 2px solid var(--input-border);
  cursor: pointer;
}

.select[data-is-disabled='true'] {
  opacity: .5;
}

.select:not(.loader):not(.grid-checklist)::after {
  content: '';
  width: .8em;
  height: .5em;
  background-color: currentColor;
  /* triangle - this is themeable whereas a CSS defined background SVG is not */
  clip-path: polygon(100% 0%, 0 0%, 50% 100%);
}

.select::after {
  justify-self: end;
}

.select .loader-icon {
  font-size: calc(.5rem / 4);
  justify-self: end;
}

/* hide select dropdown arrow during loading */
.select[data-child-is-loading='true']::after {
  display: none;
}

select,
.select .loader-title,
.select .faux-select {
  width: 100%;
  background-color: transparent;
  color: inherit;
  font-family: var(--font-sans-serif);
  font-size: inherit;
  line-height: inherit;
  font-weight: 700;
  text-transform: uppercase;
  padding: 0 1em 0 0;
  border: none;
  margin: 0;
  outline: none;
  cursor: inherit;

  /* stylelint-disable-next-line property-no-vendor-prefix */
  -webkit-appearance: none;
}

select::-ms-expand {
  display: none;
}

select:focus+.focus {
  position: absolute;
  top: -1px;
  right: -1px;
  bottom: -1px;
  left: -1px;
  border: 2px solid var(--input-outline);
  border-radius: inherit;
}

select,
.select::after,
.select .loader-icon,
.select .loader-title {
  /* allow select and icon to stack */
  grid-area: select;
}

/* ----------------------------------------
#header #run-select .submit
-------------------------------------- */

.submit {
  width: 100%;
  background-color: var(--submit-bg);
  color: var(--submit-text);
  font-size: .7rem;
  line-height: 1.1;
  padding: .35em .35em .2em;
  border: 2px solid var(--submit-border);
  margin: 0;
}

.submit.small {
  font-weight: bold;
}

.submit:focus {
  outline: 2px solid var(--input-outline);
  outline-offset: -3px;
}

/* ----------------------------------------
.run
-------------------------------------- */

.run.wrapper {
  background-color: var(--run-bg);
  /* show bgcolor */
  padding: 0 0 1px;
}

/* ----------------------------------------
.run #collections .run-header
-------------------------------------- */

.run-header {
  position: -webkit-sticky;
  /* stylelint-disable-next-line declaration-block-no-duplicate-properties */
  position: sticky;
  top: var(--height-fixed-header);
  z-index: var(--z-index-overlay);
  width: 100%;
  background-color: var(--run-header-bg);
  color: var(--run-header-text);
  margin: 0;
}

.run-header-label {
  background-color: var(--run-header-label-bg);
  text-align: left;
  margin: 0;
}

.run-header-label-date {
  text-transform: none;
}

.run-header-item {
  background-color: var(--run-header-item-bg);
  border-left: 1px solid var(--run-header-item-border);
}

.run-header-item > .small {
  text-align: right;
}

.run-header-item > .icon {
  width: .7rem;
  height: .7rem;
}

.run-header-item > .icon.icon-compass {
  width: .6rem;
  height: .6rem;
  margin-top: .025rem;
}

/* ----------------------------------------
.run #collections fieldset
-------------------------------------- */

.fieldset-wrapper {
  border-bottom: var(--gutter-sixth) solid var(--collection-border);
}

.fieldset-wrapper.last {
  border-bottom: 0;
}

.fieldset-liner {
  /* AP for label */
  position: relative;
  padding: var(--gutter) var(--gutter) var(--gutter) calc(var(--gutter) + var(--gutter-half));
}

.fieldset-liner:not([class*=' color-']) {
  background-color: var(--collection-bg);
}

.fieldset-liner-before {
  content: '';
  display: block;
  position: absolute;
  top: var(--gutter-sixth);
  bottom: var(--gutter-sixth);
  left: 0;
  border-right: 1px solid var(--border-shadow);
  border-left-style: solid;
  border-left-width: var(--gutter-half);
  filter: saturate(.8);
}

.fieldset-liner-before:not([class*=' color-']) {
  border-left-color: var(--collection-border-left);
}

fieldset {
  padding: 0;
  border: 0;
  margin: 0;
}

/* ----------------------------------------
.run #collections legend
-------------------------------------- */

legend {
  width: 100%;
  padding: 0;
  margin: 0;
}

.legend-adjacent {
  position: absolute;
  top: var(--gutter);
  right: var(--gutter);
}

.address {
  display: block;
  font-family: var(--font-sans-serif);
  font-size: 1.25rem;
  font-weight: 700;
}

.address > .icon-compass {
  float: right;
  width: .8em;
  height: .8em;
  margin: .2em 0 0 var(--gutter-half);
}

.name {
  display: block;
  margin-top: .2em;
}

.small {
  font-family: var(--font-sans-serif);
  font-size: .7rem;
  font-weight: 400;
  text-transform: uppercase;
}

.small.brand {
  font-family: var(--font-sans-serif-brand);
}

.small-lc {
  font-family: var(--font-sans-serif);
  font-size: .74rem;
  font-weight: 400;
}

.smaller {
  font-family: var(--font-sans-serif);
  font-size: .6rem;
  font-weight: 700;
  text-transform: uppercase;
}

/* ----------------------------------------
.run #collections .input
-------------------------------------- */

.run .input {
  padding-top: var(--gutter);
  border-top: 1px dashed var(--collection-input-border);
  margin: var(--gutter) 0;
}

/* ----------------------------------------
.run #collections .select
-------------------------------------- */

.select.select-large {
  font-size: .9rem;
  line-height: 1.1;
  padding: 0;
  border-width: 2px;
}

.select.select-large::after {
  width: .9em;
  height: .6em;
  margin: 0 .5em 0 0;
}

.select-large select,
.select-large .faux-select {
  padding: .6em 2em .4em .5em;
}

/* ----------------------------------------
.run #collections .container-count
-------------------------------------- */

.container-count {
  /* AP */
  position: relative;
}

.container-count-label {
  position: relative;
  bottom: -.55em;
  z-index: 1;
  width: 100%;
  color: var(--container-count-text);
  font-weight: 700;
  text-align: center;
}

.container-count-tub .container-count-label {
  bottom: -.4em;
}

.container-count .icon-bucket,
.container-count .icon-cookietime,
.container-count .icon-tub,
.container-count .icon-wheeliebin {
  display: block;
  width: 100%;
  height: 1.9em;
}

/* ----------------------------------------
.run #collections .notes .input-checkbox
See: https://moderncss.dev/pure-css-custom-checkbox-style/
-------------------------------------- */

.notes .grid-checkbox {
  padding-bottom: calc(var(--gutter-quarter) + 2px + 1px);
}

.input-checkbox {
  display: grid;
  width: var(--input-checkbox-width);
  height: var(--input-checkbox-width);
  background-color: var(--input-bg); /* For iOS < 15 */
  color: currentColor;
  font: inherit;
  border: .15em solid currentColor;
  border-radius: .15em;
  margin: 0; /* Not removed via appearance */
  -webkit-appearance: none;
  appearance: none; /* Remove most all native input styles */
  place-content: center;
}

.input-checkbox.input-checkbox-small {
  width: var(--input-checkbox-small-width);
  height: var(--input-checkbox-small-width);
}

.select .input-checkbox {
  position: relative;
  top: 2px;
  height: calc(100% + 2px);
  border-top: 0;
  border-right: 0;
}

.input-checkbox:checked::before {
  content: '';
  width: .65em;
  height: .65em;
  clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
  background-color: CanvasText; /* Windows High Contrast Mode */
  /* box-shadow: inset 1em 1em var(--input-border); */
}

.input-checkbox-small:checked::before {
  width: .5em;
  height: .5em;
}

.input-checkbox:focus {
  outline: max(2px, .15em) solid var(--input-outline);
  outline-offset: max(2px, .15em);
}

/* .input-checkbox:disabled {
  --input-checkbox-color: var(--form-control-disabled);

  color: var(--form-control-disabled);
  cursor: not-allowed;
} */

/* ----------------------------------------
.run #collections .button-checkbox
Disclosure pattern (reveal input by clicking round checkbox)
-------------------------------------- */

.button-checkbox {
  display: grid;
  width: 2.09375rem;
  height: 2.09375rem;
  align-items: center;
  color: var(--checkbox-icon);
  border: 2px solid var(--checkbox-border);
  border-radius: 100%;
  justify-items: center;
}

.button-checkbox > span {
  display: contents;
}

.button-checkbox.button-checkbox-small {
  width: 1.6rem;
  height: 1.6rem;
}

.button-checkbox .icon {
  width: 50%;
  height: 50%;
}

.button-checkbox .icon-dash,
.button-checkbox .icon-tick {
  width: 100%;
  height: 100%;
}

.button-checkbox .icon-edit {
  width: 59%;
  height: 59%;
}

[data-is-complete='false'] {
  background-color: var(--collection-button-bg-incomplete);
}

[data-is-complete='false'][disabled] {
  background-color: var(--collection-button-bg-disabled);
}

[data-is-complete='true'] {
  background-color: var(--collection-button-bg-complete);
}

[data-is-expanded='false'],
[data-is-complete='false'] .is-complete,
[data-is-complete='false'][data-is-editing='true'] .is-complete,
[data-is-complete='false'][data-is-editing='true'] .is-not-complete,
[data-is-complete='true'][data-is-editing='true'] .is-complete,
[data-is-complete='true'] .is-not-complete,
[data-is-editing='false'] .is-editing {
  display: none;
}

/* ----------------------------------------
.run #collections .notes
-------------------------------------- */

.notes {
  color: var(--notes-text);
  font-family: var(--font-sans-serif-brand);
  font-size: 1rem; /* note: minimum of 16px required to prevent zoom on edit */
  line-height: 1.3;
  padding-top: var(--gutter);
  border-top: 1px dotted var(--notes-border);
  margin: var(--gutter) 0 0;
}

.notes p {
  margin: 0;
}

.notes-editor {
  min-height: 100%; /* match height of edit checkbox */
  background-color: var(--notes-input-bg);
  padding: var(--gutter-quarter) var(--gutter-half);
  border: 2px solid transparent;
  margin: 0;
}

.notes-editor[contenteditable] {
  background-color: var(--notes-input-bg-active);
  border-color: var(--notes-input-border-active);
}

.notes-editor[contenteditable]:focus {
  outline: 2px solid var(--input-outline);
  outline-offset: -4px;
}

/* ----------------------------------------
.run #collections .notes .date-flag
-------------------------------------- */

.date-flag {
  display: inline-block;
  font-size: .65rem;
  padding: .25rem calc(var(--gutter-half) + 2px) .15em;
  border: 1px solid var(--border-shadow);
  margin: 0 var(--gutter-half) var(--gutter-quarter) 0;
}

/* ----------------------------------------
.run #collections .collection-selection
-------------------------------------- */

.collection-selection {
  background-color: rgba(var(--rgb-white), .3);
  text-align: center;
  padding: var(--gutter-half) var(--gutter) calc(var(--gutter-half) - var(--gutter-sixth));
  border-top: 1px dotted var(--border-shadow);
  margin: var(--gutter) calc(var(--gutter) * -1) calc((var(--gutter) - var(--gutter-sixth)) * -1);
}

/* ----------------------------------------
.run .submit status
-------------------------------------- */

.submit-status {
  position: fixed;
  bottom: 0;
  left: 0;
  z-index: calc(var(--z-index-header-footer) + 1);
  width: 100%;
  min-height: var(--height-fixed-footer);
  background-color: var(--submit-status-bg);
  color: var(--submit-status-text);
  padding-top: calc(var(--gutter) * .55);
  padding-bottom: calc(var(--gutter) * .45);
  border-top: 1px solid var(--submit-status-border);
}

.submit-status .loader-title {
  font-family: var(--font-sans-serif);
  font-size: .8rem;
  font-weight: 700;
  text-transform: uppercase;
  /* space for icon */
  padding-right: 1.5rem;
}

.submit-status .loader-description {
  font-family: monospace;
  font-size: .7rem;
}

/* ----------------------------------------
.footer
-------------------------------------- */

.footer {
  position: fixed;
  bottom: 0;
  left: 0;
  z-index: var(--z-index-header-footer);
  width: 100%;
  background-color: var(--footer-bg);
  color: var(--footer-text);
  padding: var(--gutter-half) 0;
  border-top: 1px solid var(--footer-border);
  margin: 0 auto;
}

a.small,
.a.small {
  text-transform: none;
}

.footer p {
  text-overflow: ellipsis;
  margin: 0;
  overflow: hidden;
}

.footer a,
.footer .a {
  color: var(--footer-link-text);
}

.footer-logo {
  width: 2.3rem;
  height: 1.1rem;
  overflow: hidden;
}

.footer-logo > img {
  display: block;
  position: relative;
  width: 100%;
}

.footer-links > * {
  display: inline-block;
  margin-right: var(--gutter);
}

.a.footer-version {
  text-transform: uppercase;
}

/* ----------------------------------------
.overlay
-------------------------------------- */

.overlay {
  position: fixed;
  top: 0;
  z-index: var(--z-index-overlay);

  background-color: var(--dialog-dark-bg);
  padding: 4.5625rem 0 1.5rem;
}

.loader {
  color: var(--loader-text);
}

.loader.overlay {
  color: var(--loader-text);
}

.loader.select {
  color: var(--loader-select-text);
}

.loader.submit-status {
  background-color: var(--submit-status-bg-saving);
  color: var(--submit-status-text-saving);
}

/* Loader icon */

.loader-icon {
  display: inline-block;
  position: relative;
  font-size: calc(4rem / 4);
}

.dialog-button .loader-icon {
  position: relative;
  top: -.1em;
  font-size: calc(.6rem / 4);
  justify-self: end;
}

.submit-status .loader-icon {
  font-size: calc(.8rem / 4);
  justify-self: end;
}

/* Loading spinner icon - https://loading.io/css/ (.lds-ring) */

.loader-icon .is-loading {
  width: calc(4em + (.5em * 2));
  height: calc(4em + (.5em * 2));
}

.loader-icon .is-loading > div {
  display: block;
  position: absolute;
  width: 4em;
  height: 4em;
  border: .5em solid currentColor;
  border-color: currentColor transparent transparent transparent;
  border-radius: 50%;
  margin: .5em;
  animation: loader-icon 1.2s cubic-bezier(.5, 0, .5, 1) infinite;
}

.loader-icon .is-loading > div:nth-child(1) {
  animation-delay: -.45s;
}

.loader-icon .is-loading > div:nth-child(2) {
  animation-delay: -.3s;
}

.loader-icon .is-loading > div:nth-child(3) {
  animation-delay: -.15s;
}

/* Error icon (X) */

.loader-icon .is-loading-error {
  position: relative;
  width: calc(4em + (.25em * 2));
  height: calc(4em + (.25em * 2));
}

.loader-icon .is-loading-error::before,
.loader-icon .is-loading-error::after {
  content: '';
  display: block;
  position: absolute;
  top: calc(50% - .25em);
  left: -.25em;
  width: 100%;
  background-color: currentColor;
  border: .25em solid currentColor;
  transform: rotate(45deg);
  transform-origin: center;;
}

.loader-icon .is-loading-error::after {
  transform: rotate(-45deg);
}

/* Complete icon (tick) */

.loader-icon .is-loading-complete {
  width: calc(4em + (.25em * 2));
  height: calc(4em + (.25em * 2));
}

.loader-icon .is-loading-complete::before {
  /* tick - https://codepen.io/dotherightthingnz/pen/RwjGmQd */
  content: '';
  display: block;
  width: 100%;
  height: 100%;
  background-color: currentColor;
  clip-path: polygon(12% 60%, 3% 70%, 40% 100%, 100% 21%, 91% 14%, 38% 82%);
}

/* Loading states */

[data-is-loading] .is-loading,
[data-is-loading] .is-loading-error,
[data-is-loading] .is-loading-complete {
  display: none;
}

[data-is-loading='false'] .is-loading {
  animation: none;
}

[data-is-loading='true'] .is-loading {
  display: block;
}

[data-is-loading='complete'] .is-loading-complete {
  display: block;
}

[data-is-loading='error'] .is-loading-error {
  display: block;
}

body[data-child-is-loading='true'] {
  overflow: hidden;
}

/* Loader title */

.loader-title {
  font-family: var(--font-sans-serif);
}

.loader.overlay .loader-title {
  text-align: center;
}

/* Loader description */

.loader-description {
  font-family: var(--font-sans-serif);
  text-transform: none;
}

.loader.overlay .loader-description {
  text-align: center;
}

/* Animation */

@keyframes loader-icon {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion) {
  .loader-icon .is-loading > div {
    animation: none;
  }
}

@supports (-webkit-backdrop-filter: none) or (backdrop-filter: none) {
  .overlay {
    /* stylelint-disable-next-line property-no-vendor-prefix */
    -webkit-backdrop-filter: grayscale(100%);
    backdrop-filter: grayscale(100%);
  }
}

/* ----------------------------------------
.dialog
-------------------------------------- */

.dialog {
  position: fixed;
  top: 0;
  z-index: var(--z-index-header-footer);
  width: 100%; /* of max-width */
  height: 100vh;
  padding-top: calc(var(--height-fixed-header) + (var(--gutter) * 1.5));
  overflow-y: auto;
}

.dialog-header {
  position: fixed;
  top: 0;
  z-index: var(--z-index-header-footer);
  width: 100%;
  height: var(--height-fixed-header);
  padding-top: var(--header-padding-top);
  padding-bottom: var(--header-padding-bottom);
  margin-bottom: calc(var(--gutter) * 2);
}

.dialog-header::after {
  content: '';
  display: block;
  position: absolute;
  right: 0;
  bottom: 0;
  left: 0;
  border-bottom: .25rem solid;
}

.dialog-header .brand-heading {
  margin-bottom: 0;
}

.dialog-heading {
  font-weight: 700;
  padding-top: calc(var(--gutter) * 1.5);
  padding-bottom: var(--gutter);
  border-bottom: 2px solid;
  margin: 0 0 var(--gutter);
}

.dialog-key,
.dialog-links {
  font-family: var(--font-sans-serif-brand);
  padding: 0;
  margin: 0;
}

.dialog-key-item {
  padding: var(--gutter-half) 0;
  border-bottom: 1px solid rgba(var(--rgb-black), .3);
}

.dialog-key-item .icon-compass {
  width: 55%;
  height: .8em;
}

.dialog-key-item:first-child {
  padding-top: 0;
}

.dialog-links-item {
  padding: 0 0 var(--gutter);
}

.dialog-key-item-definition {
  line-height: 1;
}

.dialog-key-item-action {
  display: block;
  line-height: 1.1;
  margin-top: var(--gutter-quarter);
}

.dialog-button-wrapper {
  margin-bottom: var(--gutter);
}

.dialog-button {
  display: inline-block;
  line-height: 1.2;
  text-shadow: 0 1px 1px var(--dialog-button-text-shadow);
  padding: var(--gutter-half);
  padding-right: calc(var(--gutter-half) + var(--gutter-sixth));
  border-radius: .25rem;
}

.dialog-dark .dialog-button {
  background-color: var(--dialog-dark-button-bg);
  color: var(--dialog-dark-button-text);
}

.dialog-light .dialog-button {
  background-color: var(--dialog-light-button-bg);
  color: var(--dialog-light-button-text);
}

.dialog-button[data-is-loading='false'] .loader-icon {
  display: none;
}

.dialog-button[data-is-loading='true'] .loader-icon {
  margin-left: var(--gutter-half);
}

/* dialog themes */

#dialog-developer {
  overflow-y: hidden;
}

.dialog-dark,
.dialog-dark .dialog-header {
  background-color: var(--dialog-dark-bg);
  color: var(--dialog-dark-text);
}

.dialog-dark .dialog-header::after {
  border-color: var(--dialog-dark-header-border);
}

.dialog-dark .simple-console {
  background-color: var(--dialog-dark-console-bg);
  font-family: monospace;
  font-size: .8rem;
}

.dialog-light,
.dialog-light .dialog-header {
  background-color: var(--dialog-light-bg);
  color: var(--dialog-light-text);
}

.dialog-light .dialog-header::after {
  border-color: rgba(var(--rgb-black), .3);
}

.dialog-light .dialog-body {
  padding-bottom: calc(var(--gutter) * 1.5);
}

/* ----------------------------------------
.dialog brand-heading
Emulating the kaicycle logo
-------------------------------------- */

.brand-heading {
  color: var(--nruicolor-header-bg-100);
  font-family: var(--font-sans-serif-brand);
  font-size: 1.7rem;
  line-height: .8;
  text-transform: lowercase;
  margin: 0 0 var(--gutter);
}

.brand-heading > * {
  margin-left: -.25ch;
}

.brand-heading > :nth-child(even) {
  color: var(--nruicolor-collections-bg-100);
}

/* ----------------------------------------
.dialog table
-------------------------------------- */

table {
  font-family: sans-serif;
  font-size: .75rem;
  line-height: 1;
  border-collapse: collapse;
}

th,
td {
  vertical-align: top;
  text-align: left;
}

th {
  /* see .dialog-heading */
  font-weight: 700;
  text-transform: uppercase;
  padding: calc(var(--gutter) * 1.5) var(--gutter) var(--gutter) 0;
  border-bottom: 2px solid;
  margin: 0 0 var(--gutter);
}

td {
  padding: var(--gutter) var(--gutter) 0 0;
}

td:nth-child(1),
td:nth-child(2) {
  white-space: nowrap;
}

</style>